# Template file for 'jellyfin'
pkgname=jellyfin
version=10.10.7
revision=1
archs="aarch64 x86_64"
depends="ffmpeg"
short_desc="The Free Software Media System"
maintainer="krum <git@kris.sh>"
license="GPL-2.0-only"
homepage="https://jellyfin.org"
case "$XBPS_TARGET_MACHINE" in
aarch64)
	distfiles=https://repo.jellyfin.org/files/server/linux/stable/v${version}/arm64/jellyfin_${version}-arm64.tar.gz
	checksum=6ddd67274f287330b3d1168c0c1939f369d30d979aff7d08bb3ec541efde8050
;;
x86_64)
	distfiles=https://repo.jellyfin.org/files/server/linux/stable/v${version}/amd64/jellyfin_${version}-amd64.tar.gz
	checksum=243247f811e6b39bc1b8e5c9450d791586a1efcbf7aab911352a423370305448
;;
*)
	broken="No distfiles available for this target"
	;;
esac

system_accounts="jellyfin"
jellyfin_homedir="/var/lib/jellyfin"
jellyfin_descr="jellyfin daemon"

make_dirs="/var/lib/jellyfin 0700 jellyfin jellyfin"

do_install() {
	vsv jellyfin
	
	vmkdir opt/jellyfin
	vcopy * opt/jellyfin
}
