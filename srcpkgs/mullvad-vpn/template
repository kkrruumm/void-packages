# Template file for 'mullvad-vpn'
pkgname=mullvad-vpn
version=2025.5
revision=3
archs="aarch64 x86_64"
depends="alsa-lib iputils libnftnl libnotify nss"
short_desc="The Mullvad VPN client app for desktop"
maintainer="krum <git@kris.sh>"
license="GPL-3.0-or-later"
homepage="https://www.mullvad.net"
case "$XBPS_TARGET_MACHINE" in
x86_64)
	distfiles=https://github.com/mullvad/mullvadvpn-app/releases/download/$version/MullvadVPN-${version}_amd64.deb
	checksum=9fa08d6e21637aa3a04fbd97d88282382a7186fef27d56f5e5d8fccb5f7f5e5d
;;
aarch64)
	distfiles=https://github.com/mullvad/mullvadvpn-app/releases/download/$version/MullvadVPN-${version}_arm64.deb
	checksum=fa0dd44e22b23497bc8bccc6c920a8483de5d4aae5ddf4af8f9a248f6745db35
;;
*)
	broken="No distfiles available for this target"
	;;
esac

do_install() {
	vsv mullvad-daemon

	vmkdir opt
	vcopy opt/Mullvad\ VPN opt

	vmkdir usr/bin
	vcopy usr/bin usr

	vinstall usr/share/applications/mullvad-vpn.desktop 0644 \
		usr/share/applications
}
